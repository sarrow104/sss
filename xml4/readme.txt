* xml4-readme

date:2015-11-12

======================================================================

1. 内存对象模型修改

所有，通过xml-document创建的节点对象，都应该被它管理起来——比如一个set；

然后节点之间，通过指针，建立起来父子、兄弟关系；

问题：是否需要维护indexWithinParent？

2. 解析方式修改

状态机+lexer的方式——因为，采用lexer之后，状态数会骤减。

----------------------------------------------------------------------

使用内存管理器，模仿tinyxml，把一个xml-doc所用到的内存对象，都用统一的内存管理器
管理起来；

标签的话，用id管理——只增不减；

长短不一的text如何保存？按长度%标准宽度，来划分到具体的内存管理器里面来管理；

过长的text，就单独用std::string存放即可；

----------------------------------------------------------------------

** 内存管理器与引用计数

形如：

struct {
   int times;
   char data[0];
}

或者，把引用计数成员，提到外面去——然后，引用到具体的内存对象——因为，不是所有
的内存，都需要引用计数？

----------------------------------------------------------------------

** 对象树调整

增加 node_elements , node_whitespace —— 用来保存元素的间隔；

这样的，用户可以一次性剔除或者hide这些whitespace元素；因为xml是以数据保存为目的
的，与数据呈现，关系不大；

----------------------------------------------------------------------

最后，还可以记录各个元素的偏移，以及上下前后节点关系——就好比，那种专门处理上G
的xml文件的解析方式一样！

只需要耗用大约1.5倍的内存，即可完成xml对象，到外存xml文件的映射；

